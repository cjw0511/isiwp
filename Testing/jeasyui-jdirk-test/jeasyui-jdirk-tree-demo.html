<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>jeasyui-jdirk-tree-demo</title>
    <link href="../../Resources/Plugins/jquery-easyui-1.3.3/themes/default/easyui.css" rel="stylesheet" type="text/css" />
    <link href="../../Resources/Plugins/jquery-easyui-1.3.3/themes/icon.css" rel="stylesheet" type="text/css" />
    <link href="../../Resources/Scripts/Common/jquery-easyui-plugins/jquery-easyui-extensions/icons/icon-all.css" rel="stylesheet" type="text/css" />

    <script src="../../Resources/Plugins/jquery/jquery-1.9.1.js" type="text/javascript"></script>
    <script src="../../Resources/Plugins/jquery-easyui-1.3.3/jquery.easyui.min.js" type="text/javascript"></script>
    <script src="../../Resources/Plugins/jquery-easyui-1.3.3/locale/easyui-lang-zh_CN.js" type="text/javascript"></script>

    <script src="../../Resources/Scripts/Common/jquery-easyui-plugins/jquery.jdirk.js" type="text/javascript"></script>
    <script src="../../Resources/Scripts/Common/jquery-easyui-plugins/jquery-easyui-extensions/jeasyui.extensions.js" type="text/javascript"></script>
    <script src="../../Resources/Scripts/Common/jquery-easyui-plugins/jquery-easyui-extensions/jeasyui.extensions.menu.js" type="text/javascript"></script>
    <script src="../../Resources/Scripts/Common/jquery-easyui-plugins/jquery-easyui-extensions/jeasyui.extensions.tree.js" type="text/javascript"></script>
    <script src="../../Resources/Scripts/Common/jquery-easyui-plugins/jquery-easyui-extensions/jeasyui.extensions.combo.js" type="text/javascript"></script>
    <script src="../../Resources/Scripts/Common/jquery-easyui-plugins/jquery-easyui-extensions/jeasyui.extensions.combotree.js" type="text/javascript"></script>

    <script type="text/javascript">
        $(function () {
            //            var data = [
            //                { id: 1, text: "根节点1", state: "closed", children: [{ text: "子节点11" }, { text: "子节点12" }, { text: "子节点13" }, { text: "子节点14"}] },
            //                { id: 2, text: "根节点2", state: "open", children: [
            //                    { id: 21, text: "子节点21", children: [{ text: "子节点211" }, { text: "子节点212" }, { text: "子节点213" }, { text: "子节点214"}] },
            //                    { id: 22, text: "子节点22", children: [{ text: "子节点221" }, { text: "子节点222" }, { text: "子节点223" }, { text: "子节点224"}] },
            //                    { id: 23, text: "子节点23" }, { text: "子节点24" }
            //                ]
            //                },
            //                { id: 3, text: "根节点3" },
            //                { id: 4, text: "根节点4", state: "closed", children: [{ text: "子节点41" }, { text: "子节点42" }, { text: "子节点43" }, { text: "子节点44"}] },
            //                { id: 5, text: "根节点5", state: "closed", children: [{ text: "子节点51" }, { text: "子节点52" }, { text: "子节点53" }, { text: "子节点54"}] },
            //                { id: 6, text: "根节点6" }
            //            ];


            var data = [
                { id: 1, text: "根节点1", state: "closed" },
                { text: "子节点11", pid: 1 },
                { text: "子节点12", pid: 1 },
                { text: "子节点13", pid: 1 },
                { text: "子节点14", pid: 1 },

                { id: 2, text: "根节点2", state: "open" },
                { id: 21, text: "子节点21", pid: 2 },
                { id: 211, text: "子节点211", pid: 21 },
                { text: "子节点212", pid: 21 },
                { text: "子节点213", pid: 21 },
                { text: "子节点214", pid: 21 },
                { text: "子节点215", pid: 21 },
                { id: 22, text: "子节点22", pid: 2 },
                { id: 23, text: "子节点23", pid: 2 },

                { id: 3, text: "根节点3" },
                { id: 4, text: "根节点4", state: "closed" },
                { text: "子节点41", pid: 4 },
                { text: "子节点42", pid: 4 },
                { text: "子节点43", pid: 4 },
                { text: "子节点44", pid: 4 },
                { id: 5, text: "根节点5", state: "closed" },
                { text: "子节点51", pid: 5 },
                { text: "子节点52", pid: 5 },
                { text: "子节点53", pid: 5 },
                { text: "子节点54", pid: 5 },
                { id: 6, text: "根节点6" }
            ];

            var tree = $("#tree1").tree({
                animate: true,
                cascadeCheck: true,
                onlyLeafCheck: true,
                checkbox: false,
                lines: true,
                selectOnContextMenu: true,
                //                dnd: true,
                //                onlyNodeExpand: true,
                data: data,
                //                toggleMenu: { expand: true, expandAll: true, collapse: true, collapseAll: true, submenu: false },
                //                moveMenu: { up: true, upLevel: true, down: true, downLevel: true, submenu: true },
                contextMenu: [
                    { text: "mm1", handler: function (e, node, tree, item, menu) { alert(node.text); } },
                    { text: "mm2", handler: function (e, node, tree, item, menu) { alert(node.text); } }
                ]
            });

            var ct1 = $("#combotree1").combotree({
                width: 200,
                multiple: false,
                animate: true,
                cascadeCheck: true,
                onlyLeafCheck: false,
                checkbox: true,
                lines: true,
                autoShowPanel: true,
                toggleOnClick: false,
                data: data,
                toggleMenu: { expand: true, expandAll: true, collapse: true, collapseAll: true, submenu: false },
                //                moveMenu: { up: true, upLevel: true, down: true, downLevel: true, submenu: true },
                contextMenu: [
                    { text: "mm1", handler: function (e, node, tree, item, menu) { alert(item.text); } },
                    { text: "mm2", handler: function (e, node, tree, item, menu) { alert(item.text); } }
                ]
            });

            $("#Button1").click(function () { tree.tree("loadData", data); });

            $("#Button2").click(function () {
                var target = tree.tree("find", 2).target;
                alert(tree.tree("isRoot", target));
            });

            $("#Button3").click(function () { tree.tree("load", { code: "123" }); });

            $("#Button4").click(function () { alert(tree.tree("getParent", tree.tree("find", 21).target).text); });

            $("#Button5").click(function () {
                var dom = tree.tree("find", 6).target;
                alert(tree.tree("getNode", $(dom)).text);
            });

            var source = tree.tree("find", 21), target = tree.tree("find", 5);
            $("#Button6").click(function () { tree.tree("move", { source: source.target, target: target.target, point: "append" }); });

            $("#Button7").click(function () { tree.tree("move", { source: source.target, target: target.target, point: "top" }); });

            $("#Button8").click(function () { tree.tree("move", { source: source.target, target: target.target, point: "bottom" }); });

            $("#Button9").click(function () { var l = tree.tree("getLevel", tree.tree("find", 211).target); alert(l); });

            $("#ButtonContainer").on("click", ":button:not(#Button81)", function () { tree.tree("loadData", data); });

            var i = 82;
            $("#Button81").click(function () {
                var id = "Button" + (++i).toString();
                $("<input />").attr({ id: id, type: "button", value: id }).appendTo("#ButtonContainer");
            });
        });
    </script>
</head>
<body>
    <input id="Button1" type="button" value="Reload" />
    <input id="Button2" type="button" value="IsRootNode" />
    <input id="Button3" type="button" value="Load" />
    <input id="Button4" type="button" value="GetParent" />
    <input id="Button5" type="button" value="NextNode" />
    <input id="Button6" type="button" value="MoveAppend" />
    <input id="Button7" type="button" value="MoveTop" />
    <input id="Button8" type="button" value="MoveBottom" />
    <input id="Button9" type="button" value="GetLevel" />
    <hr />
    <div id="ButtonContainer">
        <input id="Button81" type="button" value="CreateButtonAppendToButtonContainer" />
        <input id="Button82" class="Reload" type="button" value="Button82" />
    </div>
    <hr />
    <ul id="tree1" ></ul>
    <hr />
    <select id="combotree1"></select>
</body>
</html>
